function particlesInit(e){function t(){requestAnimationFrame(t),n+=.1,s.clear();for(let e in i){let t=i[e];t.old.y=60*sin(n/30+5*e)+s.height/2,s.isDistance(s.mouse(),t,o)&&(t.vel.x+=(t.x-s.mouse().x)/30,t.vel.y+=(t.y-s.mouse().y)/30),t.vel.x+=-(t.x-t.old.x)/100,t.vel.y+=-(t.y-t.old.y)/100;for(let e in i){let o=s.getDistance(i[e],t);o<200&&(s.stroke(`rgba(255,255,255, ${1-o/100})`),s.line(t.x,t.y,i[e].x,i[e].y))}t.draw()}}const s=new Ecta({canvas:{element:e}}),o=80;class c{constructor(e,t){this.x=e,this.y=t,this.vel={x:0,y:0},this.old={x:e,y:t}}draw(){this.vel.x*=.93,this.vel.y*=.93,this.x+=this.vel.x,this.y+=this.vel.y,s.fill("#fff"),s.ellipse(this.x,this.y,1.5)}}let i=[];for(let e=40;e--;)i.push(new c(random(s.width/2-350,s.width/2+350),random(s.height/2-60,s.height/2+60)));let n=0;t()}function particlesParalaxInit(e){function t(){requestAnimationFrame(t),o+=.1,s.clear();for(let e=60;e--;){let t=e/10,c=o/300;s.fill(`rgba(${4*e}, ${4*e-30*sin(c+e)}, 130, ${t/6})`),s.ellipse(s.width/2+sin(e+c)*(60+50*t)+200*cos(100*e)-s.mouse().center.x/150*t,s.height/2+cos(e+c)*(60+50*t)+200*sin(100*e)-s.mouse().center.y/150*t,.5*t)}}const s=new Ecta({canvas:{element:e}});let o=0;t()}function each(e,t){t.each(e)}function css(e,t){return e.css(t)}function delay(e,t){setTimeout(e,t)}function on_click(e,t){t.on("click",e)}function on_m_over(e,t){t.on("mouseover",e)}function on_m_out(e,t){t.on("mouseout",e)}function on_m_move(e,t){t.on("mousemove",e)}function on(e,t,s){s.on(t,e)}function on_m_over_else(e,t,s){s.on("mouseover",e),s.on("mouseout",t)}function on_m_move_else(e,t,s){s.on("mousemove",e),s.on("mouseout",t)}function lerp(e,t,s){return(1-s)*e+s*t}function arcctg(e,t){return e>=0&&t>0?Math.PI/2-Math.atan(e/t):e<0&&t>0?Math.PI/2-Math.atan(e/t):e<0&&t<=0?Math.PI+Math.atan(t/e):e>=0&&t<=0?3*Math.PI/2+Math.abs(Math.atan(e/t)):void 0}function random(e,t){return Math.random()*(t-e)+e}function getDistance(e,t,s,o){return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-o,2))}function scrollerUpdate(){css(scroller,{top:300/(sections_num-1)*(section-2)+"px"}),css($(".pages_num-list .list-item"),{opacity:.3}),css($(".pages_num-list .list-item").eq(section-2),{opacity:1}),want_scroll=!1,delay(()=>{want_scroll=!0},1e3),delay(()=>{win.scrollTop($(".sec"+section).offset().top)},800),updateFades()}function musicVisualizate(){let e=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(e),each(t=>{let s=music_tracks.eq(t),o=e[10*t]/7;o=o>5?o:5,css(s,{height:o,y:50-o,transition:"0s"})},music_tracks)}function rects(){for(let e=3;e--;){let t=innerWidth/3;reacts_heigth[e]=ecta.lerp(reacts_heigth[e],ecta.height-100*e+300,.5),ecta.fill("#fff"),ecta.rect(e*t-2,0,t+4,reacts_heigth[e])}}function setProcess(e){offset=circle_width-e/100*circle_width,css(scroll_circle,{"stroke-dashoffset":offset}),css($(".scroll-process"),4===section?{opacity:1}:{opacity:0})}function loop(){requestAnimationFrame(loop),dt+=section>=2?.1:0,music_playing&&musicVisualizate(),2===section?(ecta.clear(),clear_rect_width=0):(section>2||1===section)&&(clear_rect_width=ecta.lerp(clear_rect_width,ecta.width+100,.5),ecta.clear(0,0,clear_rect_width,innerHeight)),2===section?rects():(reacts_heigth[0]=0,reacts_heigth[1]=-500,reacts_heigth[2]=-1e3);let e=document.querySelector(".sec4").scrollHeight-win.height();setProcess(100-(e-$(".sec4").scrollTop())/e*100)}function setDefHeaderColor(e="dark"){"dark"===e?$(".header").addClass("dark"):$(".header").removeClass("dark")}function updateFades(){each(e=>{setFadeTo($(`.sec${section+1} .fade.top, .sec${section-1} .fade.top`).eq(e),"top","off"),setFadeTo($(`.sec${section+1} .fade.bottom, .sec${section-1} .fade.bottom`).eq(e),"bottom","off"),setFadeTo($(`.sec${section+1} .fade.opacity, .sec${section-1} .fade.opacity`).eq(e),"opacity","off"),delay(()=>{setFadeTo($(`.sec${section} .fade.top`).eq(e),"n","on"),setFadeTo($(`.sec${section} .fade.bottom`).eq(e),"n","on"),setFadeTo($(`.sec${section} .fade.opacity`).eq(e),"opacity","on")},1e3)},$(".fade"))}function setFadeTo(e,t="top",s){"on"===s?css(e,{opacity:1}):"off"===s&&css(e,{opacity:0}),"n"===t&&"on"===s&&css(e,{transform:"translate(0, 0)"}),"top"===t?css(e,{transform:"translateY(-20px)"}):"bottom"===t?css(e,{transform:"translateY(20px)"}):"opacity"===t?css(e,{transform:"translate(-50%, -50%)"}):"opacity"===t&&"off"===s&&delay(()=>{css(e,{display:"none"})},600)}const Ecta=(()=>{let e={x:0,y:0,offset:{x:0,y:0},movement:{x:0,y:0},center:{x:0,y:0,offset:{x:0,y:0}},press:!1,move:!1},t=!1;setInterval(()=>{e.move=t||!1}),onmousemove=(s=>{e.x=s.clientX,e.y=s.clientY,e.center.x=s.clientX-innerWidth/2,e.center.y=s.clientY-innerHeight/2,e.movement.x=s.movementX,e.movement.y=s.movementY,t=s.isTrusted}),onmousedown=(()=>{e.press=!0,onmouseup=(()=>{e.press=!1})});class s{constructor({width:e=innerWidth,height:t=innerHeight,element:s=document.body,canvas:o={element:document.createElement("canvas"),create:!0},color:c="transparent"}={}){this.element=s,this.cvs=o.element,this.ctx=this.cvs.getContext("2d");try{o.create&&this.element.appendChild(this.cvs)}catch(e){console.warn("Element doesn't exist")}this.width=e,this.height=t,this.cvs.style.background=c,this.cvs.width=this.width,this.cvs.height=this.height,this.color=c,this.filled=!1,this.stroked=!1}getDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}isDistance(e,t,s){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<s}lerp(e,t,s){return s/=10,(1-s)*e+s*t}mouse(){return e.offset.x=e.x-this.cvs.offsetLeft,e.offset.y=e.y-this.cvs.offsetTop,e.center.offset.x=e.x-innerWidth/2+this.cvs.style.left,e.center.offset.y=e.y-innerHeight/2+this.cvs.style.left,e}fill(e="#000"){this.ctx.fillStyle=e,this.filled=!0}stroke(e="#000",t=1){this.ctx.lineWidth=t,this.ctx.strokeStyle=e,this.stroked=!0}clear(e=0,t=0,s=this.width,o=this.height){this.ctx.clearRect(e,t,s,o)}rect(e,t,s,o){!o&&(o=s),this.ctx.rect(e,t,s,o),this.filled&&(this.ctx.fill(),this.filled=!1),this.stroked&&(this.ctx.stroke(),this.stroked=!1),this.ctx.beginPath()}ellipse(e,t,s,o,c=0,i=2*Math.PI,n=0){!o&&(o=s),this.ctx.ellipse(e,t,s,o,n,c,i),this.filled&&(this.ctx.fill(),this.filled=!1),this.stroked&&(this.ctx.stroke(),this.stroked=!1),this.ctx.beginPath()}line(e,t,s,o,c=!0){this.ctx.moveTo(e,t),this.ctx.lineTo(s,o),this.filled&&(this.ctx.fill(),this.filled=!1),this.stroked&&(this.ctx.stroke(),this.stroked=!1),c&&this.ctx.beginPath()}}return s})(),PI=Math.PI,sin=Math.sin,cos=Math.cos,abs=Math.abs,max=Math.max,min=Math.min,round=Math.round,win=$(window);$(()=>{delay(()=>{win.scrollTop(0)},100)});const buttons=$(".button");each(e=>{let t=buttons.eq(e);t.append('\n            <span class="wave"></span>\n        '),on_m_move_else(s=>{let o=max(t.width(),t.height())+50;css(t.children(".wave"),{transform:`translate(-50%, -50%) scale(${o/5})`,left:s.clientX-t.offset().left,top:s.clientY-t.offset().top}),css($(".header .button.fill").eq(e).children(".wave"),{top:s.clientY-t.offset().top+win.scrollTop()})},()=>{css(t.children(".wave"),{transform:"translate(-50%, -50%) scale(0)"})},t)},buttons);const music_toogle=$(".music-toogle"),audio=new Audio;audio.src="media/music/music2.mp3";audio.loop=!0;let music_playing=!1;on_click(()=>{music_playing=!music_playing,music_playing?audio.play():audio.pause(),console.log(music_playing)},music_toogle);let audio_context=new AudioContext,analyser=audio_context.createAnalyser(),src=audio_context.createMediaElementSource(audio);src.connect(analyser),analyser.connect(audio_context.destination);const fullscreen_toogle=$(".fullscreen-toogle");let is_full=!1;on_click(()=>{is_full=!is_full,is_full?document.querySelector("html").requestFullscreen():document.exitFullscreen()},fullscreen_toogle);const sections_num=5,explore_button=$(".explore_button");let section=1;$(document).ready(()=>{updateFades()}),on_click(()=>{section=2,setDefHeaderColor("dark"),delay(()=>{css($(".scroll_bar"),{opacity:1})},800),scrollerUpdate()},explore_button);const scroller=$(".scroll_bar .scroller");let want_scroll=!0;on(e=>{let t=e.originalEvent.deltaY;section>1&&want_scroll&&(t<-2&&(2===section&&(section=1,scrollerUpdate(),css($(".scroll_bar"),{opacity:0})),4!==section?(section--,section<1&&(section=1),scrollerUpdate()):$(".sec4").scrollTop()<=50&&(section--,scrollerUpdate())),t>2&&(4!==section?(section++,section>sections_num&&(section=sections_num+1),scrollerUpdate()):$(".sec4").scrollTop()+win.height()>=document.querySelector(".sec4").scrollHeight-50&&(section++,scrollerUpdate())),setDefHeaderColor(section>2||1===section?"light":"dark"))},"mousewheel",win),on_click(()=>{section=5,scrollerUpdate()},$(".scroll-process"));const music_tracks=$(".music-toogle .track"),ecta=new Ecta({canvas:{element:document.querySelector(".main_canvas"),create:!1}});let reacts_heigth=[0,-500,-1e3];const scroll_circle=$(".circle_scroll-process"),circle_width=2*Math.PI*24;let offset=0;css(scroll_circle,{"stroke-dasharray":circle_width+" "+circle_width,"stroke-dashoffset":circle_width,"transform-origin":"center center",transform:"rotate(-90deg)"});let dt=0,clear_rect_width=0;loop();const fades=$(".fade");let pr=particlesInit(document.querySelector(".particles_canvas1")),pr2=particlesParalaxInit(document.querySelector(".particles_canvas2"));on_click(()=>{is_full?delay(()=>{pr=particlesInit(document.querySelector(".particles_canvas1")),pr2=particlesParalaxInit(document.querySelector(".particles_canvas2"))},200):(pr=particlesInit(document.querySelector(".particles_canvas1")),pr2=particlesParalaxInit(document.querySelector(".particles_canvas2")))},fullscreen_toogle);
